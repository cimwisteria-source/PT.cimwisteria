<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Cyber Jump Neon</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="game-ui">
        <h1 id="score">0</h1>
        <p id="hint">Klik/Spasi untuk Lompat</p>
    </div>
    <canvas id="gameCanvas"></canvas>
    <script src="script.js"></script>
    <style>body {
    margin: 0;
    overflow: hidden;
    background: #0d0221;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

#game-ui {
    position: absolute;
    top: 20px;
    width: 100%;
    text-align: center;
    color: #00f7ff;
    text-shadow: 0 0 10px #00f7ff;
    pointer-events: none;
}

#score { font-size: 50px; margin: 0; }
#hint { opacity: 0.6; }

canvas {
    display: block;
}
</style>
       <script>const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// Konfigurasi Game
let score = 0;
let gameSpeed = 5;
let gravity = 0.6;
let isGameOver = false;

const player = {
    x: 50,
    y: canvas.height - 150,
    w: 40,
    h: 40,
    dy: 0, // Kecepatan vertikal
    jumpForce: 12,
    grounded: false,
    color: "#ff007f"
};

let obstacles = [];

// Input: Klik atau Spasi
function jump() {
    if (player.grounded) {
        player.dy = -player.jumpForce;
        player.grounded = false;
    }
}

window.addEventListener("keydown", (e) => { if (e.code === "Space") jump(); });
window.addEventListener("touchstart", jump);
window.addEventListener("mousedown", jump);

function spawnObstacle() {
    let size = Math.random() * (60 - 20) + 20;
    obstacles.push({
        x: canvas.width,
        y: canvas.height - size - 50,
        w: 20,
        h: size,
        color: "#00f7ff"
    });
}

// Timer spawn rintangan
let timer = 0;
function update() {
    if (isGameOver) return;

    // Logika Gravitasi Player
    player.dy += gravity;
    player.y += player.dy;

    // Cek batas tanah
    if (player.y + player.h > canvas.height - 50) {
        player.y = canvas.height - 50 - player.h;
        player.dy = 0;
        player.grounded = true;
    }

    // Update Rintangan
    timer++;
    if (timer % Math.floor(100 / (gameSpeed/5)) === 0) spawnObstacle();

    obstacles.forEach((obs, index) => {
        obs.x -= gameSpeed;

        // Cek Tabrakan
        if (
            player.x < obs.x + obs.w &&
            player.x + player.w > obs.x &&
            player.y < obs.y + obs.h &&
            player.y + player.h > obs.y
        ) {
            gameOver();
        }

        // Hapus rintangan yang lewat & tambah skor
        if (obs.x + obs.w < 0) {
            obstacles.splice(index, 1);
            score++;
            gameSpeed += 0.1; // Makin lama makin cepat
            document.getElementById("score").innerText = score;
        }
    });
}

function gameOver() {
    isGameOver = true;
    ctx.fillStyle = "rgba(0,0,0,0.7)";
    ctx.fillRect(0,0, canvas.width, canvas.height);
    ctx.fillStyle = "white";
    ctx.font = "40px Arial";
    ctx.textAlign = "center";
    ctx.fillText("GAME OVER", canvas.width/2, canvas.height/2);
    ctx.font = "20px Arial";
    ctx.fillText("Klik untuk Main Lagi", canvas.width/2, canvas.height/2 + 40);
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Gambar Tanah Neon
    ctx.strokeStyle = "#4d4d4d";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(0, canvas.height - 50);
    ctx.lineTo(canvas.width, canvas.height - 50);
    ctx.stroke();

    // Gambar Player (Glow)
    ctx.shadowBlur = 15;
    ctx.shadowColor = player.color;
    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.w, player.h);

    // Gambar Rintangan
    ctx.shadowColor = "#00f7ff";
    obstacles.forEach(obs => {
        ctx.fillStyle = obs.color;
        ctx.fillRect(obs.x, obs.y, obs.w, obs.h);
    });

    update();
    if (!isGameOver) {
        requestAnimationFrame(draw);
    } else {
        window.addEventListener("mousedown", () => location.reload(), {once: true});
        window.addEventListener("touchstart", () => location.reload(), {once: true});
    }
}

draw();
</script>
</body>
</html>
